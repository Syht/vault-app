components:
  schemas:
    MediaDTO:
      discriminator:
        propertyName: mediaType
        mapping:
          manga: "#/components/schemas/MangaDTO"
          series: "#/components/schemas/SeriesDTO"
          film: "#/components/schemas/FilmDTO"
          comics: "#/components/schemas/ComicsDTO"
          book: "#/components/schemas/BookDTO"
          anime: "#/components/schemas/AnimeDTO"
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        description:
          type: string
        releaseDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        genres:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/MediaGenre'
        rating:
          type: number
          format: float
        coverImage:
          type: string
          format: byte
        thumbnail:
          type: string
          format: byte
        releaseState:
          $ref: '#/components/schemas/ReleaseState'
        progressState:
          $ref: '#/components/schemas/ProgressState'

    MangaDTO:
      allOf:
        - $ref: '#/components/schemas/MediaDTO'
        - type: object
          properties:
            mangaka:
              type: string
            illustrator:
              type: string
            chaptersCount:
              type: integer
            volumeCount:
              type: integer
            demographic:
              $ref: '#/components/schemas/Demographic'

    SeriesDTO:
      allOf:
        - $ref: '#/components/schemas/MediaDTO'
        - type: object
          properties:
            seasonsCount:
              type: integer
            episodesCount:
              type: integer
            showrunner:
              type: string
            network:
              type: string
            episodeFormat:
              $ref: '#/components/schemas/EpisodeFormat'

    FilmDTO:
      allOf:
        - $ref: '#/components/schemas/MediaDTO'
        - type: object
          properties:
            director:
              type: string
            duration:
              type: integer
            boxOffice:
              type: number
              format: float
            budget:
              type: number
              format: float
            saga:
              type: string

    ComicsDTO:
      allOf:
        - $ref: '#/components/schemas/MediaDTO'
        - type: object
          properties:
            scenarist:
              type: string
            illustrator:
              type: string
            volumeCount:
              type: integer
            colorist:
              type: string
            publisher:
              type: string

    BookDTO:
      allOf:
        - $ref: '#/components/schemas/MediaDTO'
        - type: object
          properties:
            author:
              type: string
            edition:
              type: string
            pageCount:
              type: integer

    AnimeDTO:
      allOf:
        - $ref: '#/components/schemas/MediaDTO'
        - type: object
          properties:
            studio:
              type: string
            episodesCount:
              type: integer
            adaptedFrom:
              $ref: '#/components/schemas/AdaptedFrom'

    # ENUMS DEFINED BELOW

    AdaptedFrom:
      type: string
      enum:
        - MANGA
        - LIGHT_NOVEL
        - VISUAL_NOVEL
        - VIDEO_GAME
        - WEBTOON
        - ANIME_ORIGINAL
        - DRAMA

    Demographic:
      type: string
      enum:
        - SHONEN
        - SEINEN
        - SHOJO
        - JOSEI

    EpisodeFormat:
      type: string
      enum:
        - VARIABLE_LENGTH
        - FIVE_MIN
        - TEN_MIN
        - TWENTY_MIN
        - THIRTY_MIN
        - FORTY_MIN
        - FIFTY_MIN

    MediaGenre:
      type: string
      enum:
        - ACTION
        - ADVENTURE
        - COMEDY
        - DRAMA
        - FANTASY
        - HORROR
        - MYSTERY
        - ROMANCE
        - SCI-FI
        - THRILLER
        - WESTERN
        - CRIME
        - HISTORICAL
        - MUSICAL
        - BIOGRAPHY
        - DOCUMENTARY
        - ANIMATION
        - FAMILY
        - WAR
        - SPORT
        - SUPERNATURAL
        - PSYCHOLOGICAL
        - SLICE OF LIFE
        - MARTIAL ARTS
        - MECHA
        - SUPERHERO
        - NOIR
        - CYBERPUNK
        - POST-APOCALYPTIC
        - STEAMPUNK

    ProgressState:
      type: string
      enum:
        - TO_CONSUME
        - IN_PROGRESS
        - FINISHED
        - DROPPED

    ReleaseState:
      type: string
      enum:
        - ONGOING
        - CANCELED
        - FINISHED
        - HIATUS
        - UPCOMING
        - REBOOTED
